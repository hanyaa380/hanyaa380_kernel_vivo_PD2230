/* SPDX-License-Identifier: GPL-2.0 */
/*
 * Copyright (c) 2019 MediaTek Inc.
 */

#ifndef _FLASHLIGHT_H
#define _FLASHLIGHT_H

#include <linux/types.h>
#include <linux/ioctl.h>

/* device node and sysfs */
#define FLASHLIGHT_CORE             "flashlight_core"
#define FLASHLIGHT_DEVNAME          "flashlight"
#define FLASHLIGHT_SYSFS_STROBE     "flashlight_strobe"
#define FLASHLIGHT_SYSFS_PT         "flashlight_pt"
#define FLASHLIGHT_SYSFS_CHARGER    "flashlight_charger"
#define FLASHLIGHT_SYSFS_CURRENT    "flashlight_current"
#define FLASHLIGHT_SYSFS_CAPABILITY "flashlight_capability"
#define FLASHLIGHT_SYSFS_FAULT      "flashlight_fault"
#define FLASHLIGHT_SYSFS_SW_DISABLE "flashlight_sw_disable"

/* scenario */
#define FLASHLIGHT_SCENARIO_CAMERA_MASK 1
#define FLASHLIGHT_SCENARIO_DECOUPLE_MASK 2
#define FLASHLIGHT_SCENARIO_KEEPSTATE_DECOUPLE_MASK 3
#define FLASHLIGHT_SCENARIO_FLASHLIGHT (0 << 0)
#define FLASHLIGHT_SCENARIO_CAMERA     (1 << 0)
#define FLASHLIGHT_SCENARIO_COUPLE     (0 << 1)
#define FLASHLIGHT_SCENARIO_DECOUPLE   (1 << 1)
#define FLASHLIGHT_SCENARIO_KEEPSTATE_COUPLE     (0 << 2)
#define FLASHLIGHT_SCENARIO_KEEPSTATE_DECOUPLE   (1 << 2)
/* charger status */
#define FLASHLIGHT_CHARGER_NOT_READY 0
#define FLASHLIGHT_CHARGER_READY     1

/* sw disable status*/
#define FLASHLIGHT_SW_DISABLE_ON	1
#define FLASHLIGHT_SW_DISABLE_OFF	0

/* max duty number */
#define FLASHLIGHT_MAX_DUTY_NUM 40

/* flashlight arguments */
#define FLASHLIGHT_TYPE_MAX 2
#define FLASHLIGHT_CT_MAX 3
#define FLASHLIGHT_PART_MAX 2
struct flashlight_user_arg {
	int type_id;
	int ct_id;
	int arg;
	int part_id;
};

/* ioctl magic number */
#define FLASHLIGHT_MAGIC 'S'

/* ioctl protocol version 0. */
#define FLASHLIGHTIOC_T_ENABLE             _IOW(FLASHLIGHT_MAGIC, 5, int)
#define FLASHLIGHTIOC_T_LEVEL              _IOW(FLASHLIGHT_MAGIC, 10, int)
#define FLASHLIGHTIOC_T_FLASHTIME          _IOW(FLASHLIGHT_MAGIC, 15, int)
#define FLASHLIGHTIOC_T_STATE              _IOW(FLASHLIGHT_MAGIC, 20, int)
#define FLASHLIGHTIOC_G_FLASHTYPE          _IOR(FLASHLIGHT_MAGIC, 25, int)
#define FLASHLIGHTIOC_X_SET_DRIVER         _IOWR(FLASHLIGHT_MAGIC, 30, int)
#define FLASHLIGHTIOC_T_DELAY              _IOW(FLASHLIGHT_MAGIC, 35, int)

/* ioctl protocol version 1. */
#define FLASH_IOC_SET_TIME_OUT_TIME_MS     _IOR(FLASHLIGHT_MAGIC, 100, int)
#define FLASH_IOC_SET_STEP                 _IOR(FLASHLIGHT_MAGIC, 105, int)
#define FLASH_IOC_SET_DUTY                 _IOR(FLASHLIGHT_MAGIC, 110, int)
#define FLASH_IOC_SET_RT_TEMPTURE_DUTY     _IOR(FLASHLIGHT_MAGIC, 111, int)
#define FLASH_IOC_SET_SW_DURATION          _IOR(FLASHLIGHT_MAGIC, 113, int)
#define FLASH_IOC_SET_SW_DELAY             _IOR(FLASHLIGHT_MAGIC, 114, int)
#define FLASH_IOC_SET_ONOFF                _IOR(FLASHLIGHT_MAGIC, 115, int)
#define FLASH_IOC_UNINIT                   _IOR(FLASHLIGHT_MAGIC, 120, int)

#define FLASH_IOC_PRE_ON                   _IOR(FLASHLIGHT_MAGIC, 125, int)
#define FLASH_IOC_GET_PRE_ON_TIME_MS       _IOR(FLASHLIGHT_MAGIC, 130, int)
#define FLASH_IOC_GET_PRE_ON_TIME_MS_DUTY  _IOR(FLASHLIGHT_MAGIC, 131, int)

#define FLASH_IOC_SET_REG_ADR              _IOR(FLASHLIGHT_MAGIC, 135, int)
#define FLASH_IOC_SET_REG_VAL              _IOR(FLASHLIGHT_MAGIC, 140, int)
#define FLASH_IOC_SET_REG                  _IOR(FLASHLIGHT_MAGIC, 145, int)
#define FLASH_IOC_GET_REG                  _IOR(FLASHLIGHT_MAGIC, 150, int)

#define FLASH_IOC_GET_MAIN_PART_ID         _IOR(FLASHLIGHT_MAGIC, 155, int)
#define FLASH_IOC_GET_SUB_PART_ID          _IOR(FLASHLIGHT_MAGIC, 160, int)
#define FLASH_IOC_GET_MAIN2_PART_ID        _IOR(FLASHLIGHT_MAGIC, 165, int)
#define FLASH_IOC_GET_PART_ID              _IOR(FLASHLIGHT_MAGIC, 166, int)

#define FLASH_IOC_HAS_LOW_POWER_DETECT     _IOR(FLASHLIGHT_MAGIC, 170, int)
#define FLASH_IOC_LOW_POWER_DETECT_START   _IOR(FLASHLIGHT_MAGIC, 175, int)
#define FLASH_IOC_LOW_POWER_DETECT_END     _IOR(FLASHLIGHT_MAGIC, 180, int)
#define FLASH_IOC_IS_LOW_POWER             _IOR(FLASHLIGHT_MAGIC, 182, int)

#define FLASH_IOC_GET_ERR                  _IOR(FLASHLIGHT_MAGIC, 185, int)
#define FLASH_IOC_GET_PROTOCOL_VERSION     _IOR(FLASHLIGHT_MAGIC, 190, int)

#define FLASH_IOC_IS_CHARGER_IN            _IOR(FLASHLIGHT_MAGIC, 195, int)
#define FLASH_IOC_IS_OTG_USE               _IOR(FLASHLIGHT_MAGIC, 200, int)
#define FLASH_IOC_GET_FLASH_DRIVER_NAME_ID _IOR(FLASHLIGHT_MAGIC, 205, int)

/* ioctl protocol version 2 */
#define FLASH_IOC_IS_CHARGER_READY         _IOR(FLASHLIGHT_MAGIC, 210, int)
#define FLASH_IOC_SET_SCENARIO             _IOWR(FLASHLIGHT_MAGIC, 215, int)
#define FLASH_IOC_IS_HARDWARE_READY        _IOR(FLASHLIGHT_MAGIC, 220, int)
#define FLASH_IOC_GET_DUTY_NUMBER          _IOWR(FLASHLIGHT_MAGIC, 225, int)
#define FLASH_IOC_GET_MAX_TORCH_DUTY       _IOWR(FLASHLIGHT_MAGIC, 230, int)
#define FLASH_IOC_GET_DUTY_CURRENT         _IOWR(FLASHLIGHT_MAGIC, 235, int)
#define FLASH_IOC_GET_HW_TIMEOUT           _IOWR(FLASHLIGHT_MAGIC, 240, int)
#define FLASH_IOC_GET_HW_FAULT             _IOR(FLASHLIGHT_MAGIC, 250, int)
#define FLASH_IOC_GET_HW_FAULT2            _IOR(FLASHLIGHT_MAGIC, 251, int)
#define FLASH_IOCTL_SET_LED_STATE          _IOWR(FLASHLIGHT_MAGIC, 220, int)

#define LM3644TT_DEVICE_ID_VALUE 0x04
#define LM3644_DEVICE_ID_VALUE 0x03
#define KTD2687_DEVICE_ID_VALUE 0x02
#define DEVICE_ID_DEFAULT_VALUE 0x02
#define AW36413_DEVIC_ID_VALUE 0x12
#define AW3644_DEVIC_ID_VALUE 0x13
#define AW36515_DEVIC_ID_VALUE 0x14

#define BBK_TORCH_OFF   0
#define BBK_TORCH_LOW   1
#define BBK_TORCH_HIGH  3
#define BBK_TORCH_CAMEAR 4
#define BBK_TORCH_REMIND_FRONT 5
#define BBK_TORCH_REMIND_BACK 6

#define BBK_FLASH_AT_OFF    7 //vivo liguangwei add for FLASH_AT_TEST
#define BBK_FLASH_AT_TEST     8

#define FRONT_TORCH_OFF 10
#define FRONT_TORCH_ON  11

#define FRONT_TORCH_3rd_ONE_OFF 12  /*hope add for sub double flashlight*/
#define FRONT_TORCH_3rd_ONE_ON  13

#define FRONT_TORCH_3rd_TWO_OFF 14
#define FRONT_TORCH_3rd_TWO_ON  15

#define FRONT_TORCH_ONE_OFF 20
#define FRONT_TORCH_ONE_ON  21

#define BACK_TORCH_4LED_ONE_ON   22
#define BACK_TORCH_4LED_ONE_OFF  23

#define BACK_WARMIC_LED1 1
#define BACK_WARMIC_LED2 3
#define BACK_COLDIC_LED1 2
#define BACK_COLDIC_LED2 0

#if defined(CONFIG_MTK_CAM_PD2167F_EX)
#define FRONT_WARMIC_LED1 2
#define FRONT_WARMIC_LED2 0
#define FRONT_COLDIC_LED1 1
#define FRONT_COLDIC_LED2 3
#else
#define FRONT_WARMIC_LED1 0
#define FRONT_WARMIC_LED2 2
#define FRONT_COLDIC_LED1 1
#define FRONT_COLDIC_LED2 3
#endif

enum FRONT_FLASHLIGHT_NUM_ENUM { //led number
	FRONT_FLASHLIGHT_NO_LED,
	FRONT_FLASHLIGHT_SINGLE_LED,
	FRONT_FLASHLIGHT_DOUBLE_LED,
	FRONT_FLASHLIGHT_THREE_LED,
	FRONT_FLASHLIGHT_FOUR_LED
};

enum REAR_TEMPERATURE_TORCH_LEVEL_ENUM{
	REAR_TEMPERATURE_TORCH_MINI_LEVEL,
	REAR_TEMPERATURE_TORCH_MAX_LEVEL = 23,
};

//high 8 level decide max current,low 8 level decide duty
enum REAR_CAMERA_AELUX_LEVEL_BASE_ENUM{
	REAR_CAMERA_AELUX_LEVEL_BASE0 = 0x4000,
	REAR_CAMERA_AELUX_LEVEL_BASE1 = 0x8000,
	REAR_CAMERA_AELUX_LEVEL_BASE2 = 0xC000,
	REAR_CAMERA_AELUX_LEVEL_BASE3 = 0xE000,
	REAR_CAMERA_AELUX_LEVEL_BASE4 = 0xF000,
};

#endif /* _FLASHLIGHT_H */
